<div class="next-match txt-center">
  <div class="next-match-content">
    <div class="match-date">
      {{ match.start_at | date:'MMMM, dd, y | h:mm a' }}
    </div>
    <div class="match-location">
      {{ match?.location || 'Location: ?' }}
    </div>
    <div class="match-team">
      <p class="match-team-logo w20">
        <img [src]="match?.firstTeam?.logo" class="img-size" alt="logo team1">
      </p>
      <p class="match-team-code w20">
        {{ match?.firstTeam?.code | slice:0:4 | questionMask }}
      </p>
      <p class="versus w20">
        <ng-container *ngIf="match?.firstTeam?.score">
          {{ match?.firstTeam?.score | questionMask }} : {{ match?.secondTeam?.score | questionMask }}
        </ng-container>
        <ng-container *ngIf="!match?.firstTeam?.score">
          VS
        </ng-container>
      </p>
      <p class="match-team-code w20">
        {{ match?.secondTeam?.code | slice:0:4 | questionMask }}
      </p>
      <p class="match-team-logo w20">
        <img [src]="match?.secondTeam?.logo" class="img-size" alt="logo team2">
      </p>
    </div>
    <div>
      <button *ngIf="auth.currentUser?.admin || !match.firstTeam.score" class="btn btn-predict txt-bold"
        (click)="openModal(match)">
        <span *ngIf="auth.currentUser?.admin">
          Edit
        </span>
        <span *ngIf="!match.firstTeam.score && !auth.currentUser?.admin">
          {{ match?.prediction?.is_predicted ? 'Predicted' : 'Predict' }}
        </span>
      </button>
      <button (click)="openMatch(match)" class="btn btn-predict txt-bold">
        View detail
      </button>
    </div>
  </div>
</div>

<div #modal class="prediction-page modal txt-bold">
    <div class="modal-content">
      <span (click)="closeModal()" class="close txt-bold">&times;</span>
      <form class="prediction-form" #elmForm="ngForm" (ngSubmit)="submit(elmForm, _match)">
        <div class="prediction-heading txt-center">
          <p>
            <b *ngIf="auth.isLoggedIn() && !auth.currentUser.admin">
              Predict Match
            </b>
            <b *ngIf="auth.isLoggedIn() && auth.currentUser.admin">
              Edit Match
            </b>
          </p>
        </div>
        <div class="score-avatar">
          <div class="info-match txt-center">
            <div class="info-match-time">
              {{ _match.start_at | date:'MMMM, dd | h:mm a' || 'Undefined' }}
            </div>
          </div>
          <div class="score-prediction">
            <div class="name-team-1">
              <img *ngIf="_match.firstTeam" [src]="_match.firstTeam.logo" alt="" class="logo-size">
              <p class="code-team">{{ _match.firstTeam?.code }}</p>
            </div>
            <div class="prediction-middle" *ngIf="!_match?.prediction?.is_predicted || auth.currentUser.admin">
              <input type="number" #firstTeamValue name="firstTeamScore" ngModel value="{{ _match.firstTeam?.score }}" class="prediction" min="0" required>
              <span *ngIf="_match.firstTeam?.winner">*</span>
              <div class="cross"><p>-</p></div>
              <input type="number" #secondTeamValue name="secondTeamScore" ngModel value="{{ _match.secondTeam?.score }}" class="prediction" min="0" required>
              <span *ngIf="_match.secondTeam?.winner">*</span>
              <ng-container *ngIf="_match.round !== 1 && firstTeamValue?.value === secondTeamValue?.value">
                <div class="winner1">
                  Winner: <input #leftWinner class="" type="radio" name="checkWinner" value="{{ !flag }}" (change)="changeFlag()">
                </div>
                <div class="winner2">
                  Winner: <input #rightWinner class="" type="radio" name="checkWinner" value="{{ flag }}" (change)="changeFlag()">
                </div>
              </ng-container>
            </div>
            <div class="name-team-2">
              <img *ngIf="_match.secondTeam" [src]="_match.secondTeam.logo" alt="" class="logo-size">
              <p class="code-team">{{ _match.secondTeam?.code }}</p>
            </div>
            <button class="btn-prediction" [class.display-none]="_match?.prediction?.is_predicted && !auth.currentUser.admin"
              [disabled]="!firstTeamValue?.nativeElement?.value || !secondTeamValue?.nativeElement?.value">Submit</button>
          </div>
        </div>
      </form>
    </div>
  </div>
